(()=>{const e=document.getElementById("add-task-btn"),t=document.getElementById("description-task"),n=document.querySelector(".todos-wrapper");let r;r=localStorage.tasks?JSON.parse(localStorage.getItem("tasks")):[];let a=null;function o(e){this.description=e,this.completed=!1,this.index=r.length+1}const s=()=>{n.innerHTML="",r.length>0&&(r.forEach(((e,t)=>{n.innerHTML+=((e,t)=>`\n    <li class="todo-item ${e.completed?"checked":""} draggable" draggable='true'>\n      \n      <input onclick="completeTask(${t})" class="btn-competed checkbox" type="checkbox" ${e.completed?"checked":""}>\n      <div class="elmar">\n        <div class="description">${e.description}</div>\n        <div class="buttons">\n          <button onclick="editTask(${t})" type="button" class="btn-delete">Edit</button>\n          <button onclick="deleteTask(${t})" type="button" class="btn-delete">Delete</button>\n          </div>\n      </div>   \n    </li>\n  `)(e,t)})),a=document.querySelectorAll(".todo-item"))};s();const c=()=>{localStorage.setItem("tasks",JSON.stringify(r))};e.addEventListener("click",(()=>{r.push(new o(t.value)),c(),s(),t.value=""}));class d{constructor(){this.prevRow}setEventListeners(){document.querySelectorAll("li").forEach((e=>{e.addEventListener("dragstart",(e=>this.start(e))),e.addEventListener("dragover",(e=>this.over(e))),e.addEventListener("drop",(e=>this.drop(e)))}))}start(e){this.prevRow=e.target;let t=e.target.innerHTML,n=e.target.querySelector("input").checked;e.dataTransfer.setData("html-content",t),e.dataTransfer.setData("checkbox-status",n)}over(e){let t;t="LI"===e.target.parentNode.tagName?e.target.parentNode:"DIV"===e.target.parentNode.tagName?e.target.parentNode.parentNode:e.target,e.preventDefault(),this.prevRow!==t&&(this.prevRow.innerHTML=t.innerHTML,this.prevRow.querySelector("input").checked=t.querySelector("input").checked,t.innerHTML="",this.prevRow=t)}drop(e){const t=e.dataTransfer.getData("html-content"),n=e.dataTransfer.getData("checkbox-status");e.target.innerHTML=t,e.target.querySelector("input").checked="true"===n}}new Promise((function(e){window.addEventListener("load",e)})).then((function(e){(new d).setEventListeners()})),document.querySelectorAll(".checkbox").forEach((e=>{e.addEventListener("change",(e=>{const t=function(e,t){return e.target.nextElementSibling.classList.toggle("completed"),t[e.target.dataset.id].completed=e.target.checked,t}(e,c());saveToStorage("TodoList",t)}))}))})();